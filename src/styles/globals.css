@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light dark;
  --radius: 8px;

  /* The new variable for the top bar */
  --app-titlebar: 30 41 59; /* slate-800 */

  /* Core theme tokens */
  --bg: 15 23 42;          /* slate-900 */
  --panel: 30 41 59;       /* slate-800 */
  --border: 51 65 85;      /* slate-700 */
  --border-hover: 71 85 105; /* slate-600 */
  --text: 241 245 249;     /* slate-100 */
  --muted: 148 163 184;    /* slate-400 */
  --accent: 139 92 246;    /* violet-500 */
  --accent-fg: 255 255 255;

  /* Task status colors */
  --task-todo: 107 114 128;     /* gray-500 */
  --task-progress: 59 130 246;  /* blue-500 */
  --task-urgent: 239 68 68;     /* red-500 */
  --task-question: 245 158 11;  /* amber-500 */
  --task-completed: 16 185 129; /* green-500 */
  --task-cancelled: 107 114 128; /* gray-500 */
  --task-delegated: 139 92 246; /* violet-500 */

  /* Semantic colors */
  --danger: 239 68 68;      /* red-500 */
  --success: 16 185 129;    /* green-500 */
  --warning: 245 158 11;    /* amber-500 */
  --info: 59 130 246;       /* blue-500 */

  /* Editor colors */
  --editor-placeholder: 148 163 184; /* slate-400 */
}

:root[data-theme="light"] {
  --app-titlebar: 226 232 240; /* slate-200 */
  
  /* Core theme tokens */
  --bg: 248 250 252;       /* slate-50 */
  --panel: 241 245 249;    /* slate-100 */
  --border: 203 213 225;   /* slate-300 */
  --border-hover: 148 163 184; /* slate-400 */
  --text: 17 24 39;        /* slate-900 */
  --muted: 71 85 105;      /* slate-600 */
  --accent: 99 102 241;    /* indigo-500 */
  --accent-fg: 255 255 255;

  /* Task status colors */
  --task-todo: 107 114 128;     /* gray-500 */
  --task-progress: 59 130 246;  /* blue-500 */
  --task-urgent: 239 68 68;     /* red-500 */
  --task-question: 245 158 11;  /* amber-500 */
  --task-completed: 34 197 94;  /* green-500 */
  --task-cancelled: 107 114 128; /* gray-500 */
  --task-delegated: 99 102 241; /* indigo-500 */

  /* Semantic colors */
  --danger: 239 68 68;      /* red-500 */
  --success: 34 197 94;     /* green-500 */
  --warning: 245 158 11;    /* amber-500 */
  --info: 59 130 246;       /* blue-500 */

  /* Editor colors */
  --editor-placeholder: 107 114 128; /* gray-500 */
}

:root[data-theme="dark"] {
  --app-titlebar: 30 41 59; /* slate-800 */
  
  /* Core theme tokens */
  --bg: 15 23 42;          /* slate-900 */
  --panel: 30 41 59;       /* slate-800 */
  --border: 51 65 85;      /* slate-700 */
  --border-hover: 71 85 105; /* slate-600 */
  --text: 226 232 240;     /* slate-200 */
  --muted: 148 163 184;    /* slate-400 */
  --accent: 139 92 246;    /* violet-500 */
  --accent-fg: 255 255 255;

  /* Task status colors */
  --task-todo: 107 114 128;     /* gray-500 */
  --task-progress: 59 130 246;  /* blue-500 */
  --task-urgent: 239 68 68;     /* red-500 */
  --task-question: 245 158 11;  /* amber-500 */
  --task-completed: 16 185 129; /* green-500 */
  --task-cancelled: 107 114 128; /* gray-500 */
  --task-delegated: 139 92 246; /* violet-500 */

  /* Semantic colors */
  --danger: 239 68 68;      /* red-500 */
  --success: 16 185 129;    /* green-500 */
  --warning: 245 158 11;    /* amber-500 */
  --info: 59 130 246;       /* blue-500 */

  /* Editor colors */
  --editor-placeholder: 148 163 184; /* slate-400 */
}

::selection { background: rgb(var(--accent) / 0.25); }
::-webkit-scrollbar { height: 10px; width: 10px; }
::-webkit-scrollbar-thumb { background: rgb(var(--border)); border-radius: 8px; }

/* Hide horizontal scrollbar when not needed (for tab bar) */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Plugin interface utilities */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Better drag handle visibility */
.cursor-col-resize:hover {
  background: rgb(var(--accent) / 0.3) !important;
}

/* Responsive plugin cards */
@media (max-width: 640px) {
  .plugin-card {
    padding: 0.75rem;
  }
}

/* Better focus states */
.focus-ring:focus {
  outline: 2px solid rgb(var(--accent));
  outline-offset: 2px;
}

/* Improved hover states */
.app-hover:hover {
  background-color: rgb(var(--bg));
  border-color: rgb(var(--border));
}

/* Plugin status indicators */
.plugin-enabled {
  box-shadow: 0 0 0 1px rgb(34 197 94 / 0.2);
}

.plugin-disabled {
  opacity: 0.7;
}
.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

/* Custom Editor Styles */
.editor-block {
  position: relative;
  padding-left: 2rem; /* Space for syntax */
}

.editor-block:focus {
  outline: none;
}

.editor-block[data-type="h1"] { @apply text-3xl font-bold; }
.editor-block[data-type="h2"] { @apply text-2xl font-bold; }
.editor-block[data-type="blockquote"] { @apply pl-4 border-l-4 border-app-border text-app-muted; }

.editor-block.is-active::before {
  position: absolute;
  left: 0;
  color: rgb(var(--muted));
  font-weight: normal;
}

.editor-block[data-type="h1"].is-active::before { content: '# '; @apply text-3xl; }
.editor-block[data-type="h2"].is-active::before { content: '## '; @apply text-2xl; }
.editor-block[data-type="blockquote"].is-active::before { content: '> '; }
